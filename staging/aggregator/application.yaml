image:
  repository: europe-west6-docker.pkg.dev/ctdapp-391309/ctdapp/cover-traffic
  tag: "8187809"
replicaCount: 1
args:
  - python
  - '-m'
  - aggregator
env:
  API_HOST: 0.0.0.0
  API_PORT: 8080
  PGSSLCERT: "/etc/postgres/certs/tls.crt"
  PGSSLKEY: "/etc/postgres/certs/tls.key"
  PGSSLROOTCERT: "/etc/postgres/certs/ca.crt"
  PGSSLMODE: verify-ca
envFrom:
  - secretRef:
      name: postgres-credentials
extraVolumeMounts:
  - name: postgres-certs
    readOnly: true
    mountPath: "/etc/postgres/certs"
extraVolumes:
  - name: postgres-certs
    secret:
      secretName: postgres-certs
extraInitContainers:
  image:
    repository: busybox
    tag: latest
  command:
    - /bin/sh
    - '-c'
    - sleep 99999999
  securityContext:
    runAsNonRoot: false
    runAsUser: 0
  volumeMounts:
    - name: postgres-certs
      readOnly: false
      mountPath: "/etc/postgres/certs"
  volumes:
    - name: postgres-certs
      secret:
        secretName: postgres-certs
service:
  type: ClusterIP
  ports:
    http: 8080
